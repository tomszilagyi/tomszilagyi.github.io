<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Zutty user guide</title>
<meta name="generator" content="Org mode" />
<link rel="stylesheet" type="text/css" href="org.css"/>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2020 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Zutty user guide</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#Installation">Installation</a>
<ul>
<li><a href="#1.%20Install%20build%20dependencies">1. Install build dependencies</a></li>
<li><a href="#2.%20Obtain%20the%20source">2. Obtain the source</a></li>
<li><a href="#3.%20Configure%20the%20source">3. Configure the source</a></li>
<li><a href="#4.%20Compile%20the%20source">4. Compile the source</a></li>
<li><a href="#5.%20Install%20Zutty">5. Install Zutty</a></li>
</ul>
</li>
<li><a href="#Usage%20reference">Usage reference</a>
<ul>
<li><a href="#User%20interface%20actions">User interface actions</a></li>
<li><a href="#Environment%20variables">Environment variables</a></li>
</ul>
</li>
<li><a href="#Configuration">Configuration</a>
<ul>
<li><a href="#Basic%20configuration%20and%20mode%20switches">Basic configuration and mode switches</a></li>
<li><a href="#General%20appearance">General appearance</a></li>
<li><a href="#Shell%2Fcommand%20specification">Shell/command specification</a></li>
<li><a href="#Font%20selection">Font selection</a>
<ul>
<li><a href="#Recommended%20fonts">Recommended fonts</a></li>
<li><a href="#Making%20fonts%20discoverable">Making fonts discoverable</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#Persistent%20configuration">Persistent configuration</a>
<ul>
<li><a href="#Extra%20resources">Extra resources</a>
<ul>
<li><a href="#altSendsEscape">altSendsEscape</a></li>
<li><a href="#modifyOtherKeys">modifyOtherKeys</a></li>
<li><a href="#Base%20palette%20colors">Base palette colors</a></li>
</ul>
</li>
<li><a href="#Removing%20and%20overriding%20persistent%20configuration">Removing and overriding persistent configuration</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-Installation" class="outline-2">
<h2 id="Installation">Installation</h2>
<div class="outline-text-2" id="text-Installation">
<p>
You will probably need to install Zutty from source. This is not as
scary as it might seem, because Zutty has very few dependencies and is
a relatively small program.
</p>
</div>

<div id="outline-container-1.%20Install%20build%20dependencies" class="outline-3">
<h3 id="1.%20Install%20build%20dependencies">1. Install build dependencies</h3>
<div class="outline-text-3" id="text-1.%20Install%20build%20dependencies">
<p>
On a current (stable or testing) Debian, or a Debian-derivative such
as Ubuntu, the following command will make sure everything you need to
build Zutty is in place. It also gives you an idea of what you need to
install Zutty on other flavours of Linux.
</p>

<pre class="example">
sudo apt-get install \
   build-essential pkg-config python3 \
   libegl-dev libfreetype-dev libgles-dev libxmu-dev
</pre>


<p>
Hint: You might need to substitute <code>libfreetype6-dev</code> for
<code>libfreetype-dev</code> and <code>libgles2-mesa-dev</code> for <code>libgles-dev</code>.
When in doubt, use your distribution's package manager along with your
favourite Internet search engine.
</p>
</div>
</div>

<div id="outline-container-2.%20Obtain%20the%20source" class="outline-3">
<h3 id="2.%20Obtain%20the%20source">2. Obtain the source</h3>
<div class="outline-text-3" id="text-2.%20Obtain%20the%20source">
<p>
Clone the source from git:
</p>
<pre class="example">
git clone https://github.com/tomszilagyi/zutty.git
cd zutty
</pre>


<p>
Alternatively, to download a compressed tarball of a certain release
version, go to <a href="https://github.com/tomszilagyi/zutty/releases">https://github.com/tomszilagyi/zutty/releases</a>, download
the tarball you want (we recommend the latest one), and uncompress it.
Further steps assume that your working directory is within the
uncompressed directory, so <code>cd</code> into it!
</p>
</div>
</div>

<div id="outline-container-3.%20Configure%20the%20source" class="outline-3">
<h3 id="3.%20Configure%20the%20source">3. Configure the source</h3>
<div class="outline-text-3" id="text-3.%20Configure%20the%20source">
<p>
You are supposed to be inside the repository (or release) directory
structure, i.e., the <code>zutty</code> directory created above should be your
working directory. Issue this command:
</p>

<pre class="example">
./waf configure
</pre>


<p>
You should see some output with a confirmation of the Zutty version
you are going to build, and whether you are creating a Debug build (it
should say "no" at this point; read the <a href="./HACKING.html">Developer guide</a> if you are
interested in debugging Zutty).
</p>

<p>
By default, g++ (the gcc compiler for C++) will be used to compile
Zutty. To use clang instead, pass <code>--check-cxx-compiler=clang++</code> to
the above script.
</p>

<p>
In the configure output, you will see checks for the presence of the
build dependencies. If anything is missing, the configure script will
terminate with an error. Otherwise, the configure output will finish
with a line like this:
</p>

<pre class="example">
'configure' finished successfully (0.373s)
</pre>


<p>
In case you will want to install the <code>zutty</code> executable to somewhere
other than <code>/usr/local/bin</code>, use the <code>--prefix</code> option to specify the
installation prefix (the default is <code>/usr/local</code>). For example, I
often install stuff for my user account only, in which case I would
issue <code>./waf configure --prefix=/home/tom/root</code> so that later on,
<code>zutty</code> would end up installed as <code>/home/tom/root/bin/zutty</code>.
</p>

<p>
If you would like to learn more, <code>./waf --help</code> lists a reference of
every option you can use.
</p>
</div>
</div>

<div id="outline-container-4.%20Compile%20the%20source" class="outline-3">
<h3 id="4.%20Compile%20the%20source">4. Compile the source</h3>
<div class="outline-text-3" id="text-4.%20Compile%20the%20source">
<p>
Just type:
</p>

<pre class="example">
./waf
</pre>


<p>
Alternatively, if you want to specify the number of jobs to run in
parallel, issue <code>./waf -j 4</code> (substitute your number of CPU cores in
place of 4).
</p>

<p>
The compilation messages should be self-explanatory (assuming you do
not run into C++ error messages &#x2013; decoding those is an art form in its
own right). A successful compile ends with a line like this:
</p>

<pre class="example">
'build' finished successfully (23.524s)
</pre>


<p>
At this point, the <code>zutty</code> executable is complete and ready to be run
at <code>build/src/zutty</code> and you might want to launch it just to see if it
works. You can run it without arguments to start it up with defaults,
or add <code>-h</code> (or <code>-help</code>) to learn about available options.
</p>
</div>
</div>

<div id="outline-container-5.%20Install%20Zutty" class="outline-3">
<h3 id="5.%20Install%20Zutty">5. Install Zutty</h3>
<div class="outline-text-3" id="text-5.%20Install%20Zutty">
<p>
For regular use, it is best to copy the <code>zutty</code> executable to a
system-wide directory for binaries where it will be found as part of
the default executable search path. This makes it easier to launch and
also decouples it from any local changes. You can manually copy the
executable built in the previous step, but it might be easier to use
the built-in install step in the <code>waf</code> script. Running it with <code>sudo</code>
will ensure that it is able to write to protected system-wide
locations:
</p>

<pre class="example">
sudo ./waf install
</pre>


<p>
Note that your ability to run the above command (with <code>sudo</code>) is
contingent on the presence of <code>sudo</code>, the setup of your user account
with respect to sudo, etc. If it does not work, please search the web
or ask your friendly local guru. Also, if you have specified an
install location that is actually yours (like the one I showed above)
then of course there is no point in using <code>sudo</code>.
</p>

<p>
At the end, you should see something like this:
</p>

<pre class="example">
'install' finished successfully (0.135s)
</pre>


<p>
Congratulations, you are now ready to start using Zutty as your
terminal!
</p>
</div>
</div>
</div>

<div id="outline-container-Usage%20reference" class="outline-2">
<h2 id="Usage%20reference">Usage reference</h2>
<div class="outline-text-2" id="text-Usage%20reference">
</div>
<div id="outline-container-User%20interface%20actions" class="outline-3">
<h3 id="User%20interface%20actions">User interface actions</h3>
<div class="outline-text-3" id="text-User%20interface%20actions">
<p>
The following list summarizes user-triggered actions. Note that these
are hooks handled by the terminal itself, and will not reach the
program running in the terminal. For the specification of how the
terminal encodes keypresses to the program running inside it, see the
<a href="./KEYS.html">Key mapping sequences</a> reference.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Trigger</th>
<th scope="col" class="org-left">Action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Shift+PageUp, Shift+PageDown</td>
<td class="org-left">Page screen upwards (into earlier scrollback history) or downwards by half the page height. If on the alternate screen with <code>-altScroll</code> enabled, emit synthetic arrow key events to move up/down half the screen height.</td>
</tr>

<tr>
<td class="org-left">Scroll wheel up/down</td>
<td class="org-left">Page screen up/down by 5 lines; if on the alternate screen with <code>-altScroll</code> enabled, emit a single synthetic up/down arrow key event.</td>
</tr>

<tr>
<td class="org-left">Left mouse button press (and hold)</td>
<td class="org-left">Start a new selection. Adjust by moving the mouse with the button held down.</td>
</tr>

<tr>
<td class="org-left">Right mouse button press (and hold)</td>
<td class="org-left">Adjust current selection (will grab the edge closest to the pointer); adjust by moving the mouse with the button held down.</td>
</tr>

<tr>
<td class="org-left">Quickly release and re-engage left/right mouse button</td>
<td class="org-left">While a selection is in progress, this will cycle between snap-to-char, snap-to-word and snap-to-line. (In rectangular selection mode, only snap-to-char exists.)</td>
</tr>

<tr>
<td class="org-left">Space key while left/right mouse button is held</td>
<td class="org-left">Toggle between <i>regular</i> and <i>rectangular</i> selection mode.</td>
</tr>

<tr>
<td class="org-left">Middle mouse button, Shift+Insert</td>
<td class="org-left">Paste the current content of the primary selection into the terminal.</td>
</tr>

<tr>
<td class="org-left">Control+Shift+C</td>
<td class="org-left">Copy the current content of the primary selection into the clipboard selection. (With <code>-autoCopy</code> enabled, this happens automatically whenever the primary selection is set.)</td>
</tr>

<tr>
<td class="org-left">Control+Shift+V</td>
<td class="org-left">Paste the current content of the clipboard selection into the terminal.</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-Environment%20variables" class="outline-3">
<h3 id="Environment%20variables">Environment variables</h3>
<div class="outline-text-3" id="text-Environment%20variables">
<p>
Zutty sets or alters the below environment variables in the process
spawned to run the shell. All other environment variables accessible
to Zutty will be passed unaltered to the shell program.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Environment variable</th>
<th scope="col" class="org-left">Treatment</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>DISPLAY</code></td>
<td class="org-left">Set to the current X display.</td>
</tr>

<tr>
<td class="org-left"><code>SHELL</code></td>
<td class="org-left">Set to the full (resolved) pathname of the shell being run; unset if the program is not a valid shell as per <code>/etc/shells</code>.</td>
</tr>

<tr>
<td class="org-left"><code>TERM</code></td>
<td class="org-left">Set to <code>xterm-256color</code>.</td>
</tr>

<tr>
<td class="org-left"><code>WINDOWID</code></td>
<td class="org-left">Set to the current X window id of the Zutty window.</td>
</tr>

<tr>
<td class="org-left"><code>ZUTTY_VERSION</code></td>
<td class="org-left">Set to the build version of Zutty.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="outline-container-Configuration" class="outline-2">
<h2 id="Configuration">Configuration</h2>
<div class="outline-text-2" id="text-Configuration">
<p>
Zutty has a set of configuration options, all of which have:
</p>
<ul class="org-ul">
<li>a command line option;</li>
<li>an X resource database (Xrdb) key;</li>
<li>a sensible hard default.</li>
</ul>

<p>
For each option, the above list defines the order of preference.  That
is, the command line can be used to define or override a setting in a
transient way; Xrdb entries may be used to persistently alter the
default value for an option; and lastly, without any option or
configuration, Zutty will still have a workable default.
</p>

<p>
There is also a set of <a href="#Extra%20resources">Extra resources</a> available for persistent
configuration, but not settable via command line options.
</p>

<p>
To view the list of options, issue <code>zutty -h</code> (short for <code>-help</code>):
</p>

<pre class="example">
Usage:
  zutty [-option ...] [shell]

Options:
  -altScroll    Alternate scroll mode
  -autoCopy     Sync primary to clipboard
  -bg           Background color (default: #000)
  -boldColors   Enable bright for bold
  -border       Border width in pixels (default: 2)
  -cr           Cursor color
  -display      Display to connect to
  -fg           Foreground color (default: #fff)
  -font         Font to use (default: 9x18)
  -fontsize     Font size (default: 16)
  -fontpath     Font search path (default: /usr/share/fonts)
  -geometry     Terminal size in chars (default: 80x24)
  -glinfo       Print OpenGL information
  -help         Print usage listing and quit
  -listres      Print resource listing and quit
  -login        Start shell as a login shell
  -name         Instance name for Xrdb and WM_CLASS
  -rv           Reverse video
  -saveLines    Lines of scrollback history (default: 500)
  -shell        Shell program to run
  -showWraps    Show wrap marks at right margin
  -title        Window title (default: Zutty)
  -quiet        Silence logging output
  -verbose      Output info messages
  -e            Command line to run
</pre>


<p>
All options can be abbreviated as long as they are non-ambiguous, so
it's fine to write <code>-d</code> short for <code>-display</code>, <code>-gl</code> for <code>-glinfo</code>,
<code>-fontp</code> for <code>-fontpath</code>, <code>-t</code> for <code>-title</code>, <code>-q</code> for <code>-quiet</code>, etc.
</p>

<p>
Boolean options (<code>-altScroll</code>, <code>-autoCopy</code>, <code>-boldColors</code>, <code>-glinfo</code>,
<code>-login</code>, <code>-rv</code>, <code>-showWraps</code>, <code>-quiet</code>, <code>-verbose</code>) do not expect an
argument; the mere presence of these options amounts to a setting of
"true". To set them to "false", change the leading dash to a plus
sign. For example, <code>+boldColors</code> will <i>disable</i> the "boldColors"
option (which is enabled by default). This might also be useful to
override an option that is by default false, but has been set to true
in the X resource database (see <a href="#Persistent%20configuration">Persistent configuration</a>).
</p>

<p>
All other options expect exactly one argument, with the exception of
<code>-e</code>, which must be the last option, to be followed by the command
line to run.
</p>

<p>
The options are further documented below, grouped into sections by
topic. To set up a persistent configuration (altered defaults), see
the next section <a href="#Persistent%20configuration">Persistent configuration</a>.
</p>
</div>

<div id="outline-container-Basic%20configuration%20and%20mode%20switches" class="outline-3">
<h3 id="Basic%20configuration%20and%20mode%20switches">Basic configuration and mode switches</h3>
<div class="outline-text-3" id="text-Basic%20configuration%20and%20mode%20switches">
<pre class="example">
-altScroll    Alternate scroll mode [boolean]
</pre>


<p>
If enabled, mouse scroll up and down events while on the alternate
screen buffer are translated into synthetic up- and down-arrow key
events. This might prove to be a convenient way of moving up/down
one-by-one in programs usually navigated with the keyboard arrows.
</p>

<p>
Another, similar effect (also on the alternate screen) is that the
keys normally used to page through the screen buffer (Shift+PageUp,
Shift+PageDown) will generate the same synthetic up- and down-arrow
key events as above, but in multiples, to scroll half the amount of
scrollable lines. This might be convenient in the same situations,
only for larger jumps.
</p>

<pre class="example">
-autoCopy     Sync primary to clipboard [boolean]
</pre>


<p>
By enabling this option, Zutty will automatically propagate the
primary selection to the clipboard each time a selection is completed,
acting as if you pressed Control+Shift+C immediately after each
selection. This might be convenient if you do not wish to use the dual
selection capability (primary plus clipboard), and expect to be able
to paste into other programs that source the data from the clipboard.
</p>

<pre class="example">
-display      Display to connect to
</pre>


<p>
The X display to connect to. By default, the value of the environment
variable DISPLAY is used. This option is exceptional in that (for
obvious reasons) it cannot be configured via the X resource database,
only the command line.
</p>

<pre class="example">
-glinfo       Print OpenGL information
</pre>


<p>
If enabled, Zutty will query and log some GL variables on program
startup. These include EGL_VERSION, EGL_VENDOR, EGL_EXTENSIONS, as
well as GL_RENDERER, GL_VERSION, GL_VENDOR, GL_EXTENSIONS, and numeric
limits on the Compute Shader implementation. This is mostly a
debugging aid. The output is not affected by any verbosity changes
made via <code>-v</code> or <code>-q</code>.
</p>

<pre class="example">
-help         Print usage listing and quit
</pre>


<p>
Print the help message containing the list of options documented here,
and quit.
</p>

<pre class="example">
-listres      Print resource listing and quit
</pre>


<p>
Print a listing of configurable <a href="#Extra%20resources">Extra resources</a> and quit.
</p>

<pre class="example">
-name         Instance name for Xrdb and WM_CLASS
</pre>


<p>
This option specifies the application instance name, which will be
used to look up resources in the X resource database, and reported to
the window manager as part of the <code>WM_CLASS</code> property (the other part
being the application class name, hardcoded as <code>Zutty</code>).  The
specified name should not contain "." (dot) or "*" (asterisk), as
those characters have special meanings within Xrdb entries.
</p>

<p>
If this option is not present, but the environment variable
<code>RESOURCE_NAME</code> is set, that will be used instead. If none of these
are available, the hard default value of <code>Zutty</code> will be used.
</p>

<p>
This option is exceptional in that (for obvious reasons) it cannot be
configured via the X resource database, only the command line.
</p>

<pre class="example">
-saveLines    Lines of scrollback history (default: 500)
</pre>


<p>
Set the number of lines to keep in off-screen page history, viewable
via paging the terminal up/down by Shift+PageUp and Shift+PageDown
(jumping half a page-height at once), or the mouse scrollwheel (moving
in units of 5 lines). The set amount of saved lines is in addition to
the lines visible in the terminal window.
</p>

<p>
The default value is 500 lines, which should be enough for everyday
use (the occasional peek at the output of a command that rolled off
the screen). The minimum setting is 0 (no scrollback), the maximum
allowed value is 50,000. Note that while the performance of scrolling
itself (and Zutty in general) will <i>not</i> degrade with a larger
setting, the screen buffer <i>will</i> consume proportional amounts of
memory.  With very large settings, this will dominate the total memory
usage of Zutty! For example, 1024 buffered lines (24 lines on-screen
and 1000 lines of scrollback) with 80 columns will consume 960 KiB;
this will balloon to 10 MiB with 10,000 lines of scrollback.
Adjusting the column width will have a similar (proportional) effect;
50,000 lines at a width of 120 columns will consume a whopping 70 MiB!
</p>

<p>
Note that the alternate screen buffer does not have scrollback; this
is by design and in conformance with the relevant specs (but see
<code>-altScroll</code> for enabling synthetic up- and down-arrow key events).
</p>

<pre class="example">
-quiet        Silence logging output [boolean]
-verbose      Output info messages [boolean]
</pre>


<p>
These options control the verbosity of log output emitted by
Zutty. You will only observe the effects of these if you run Zutty
itself from another terminal (as opposed to some launcher that
discards the program's output). In that case, you will notice output
that looks like this:
</p>

<pre class="example">
I [font.cc: 54] Loading /usr/share/fonts/X11/misc/9x18.pcf.gz as primary
I [font.cc:198] Glyph size 9x18
...
I [main.cc:118] Window ID: 48234498 / 0x2e00002
I [charvdev.cc:377] Resize to 935 x 771 pixels, 103 x 42 chars
</pre>


<p>
The first letter is an indication of the log level or "severity"; <code>E</code>
means Error, <code>W</code> stands for Warning, <code>I</code> is Info and <code>T</code> is Trace.
Trace will only be output if you compile Zutty into a debug build; see
the <a href="./HACKING.html">Developer guide</a> for details. Next, the origin of the log message
is shown in square brackets, indicating the source code location
(filename and line number) where the message was printed. Then comes
the actual message.
</p>

<p>
By default (if neither <code>-quiet</code> nor <code>-verbose</code> is given), Zutty will
print errors and warnings, but not info messages. If <code>-verbose</code> is
given, info messages are also printed. On the other hand, if <code>-quiet</code>
is given, nothing is printed. If both options are given, <code>-quiet</code>
wins.
</p>
</div>
</div>

<div id="outline-container-General%20appearance" class="outline-3">
<h3 id="General%20appearance">General appearance</h3>
<div class="outline-text-3" id="text-General%20appearance">
<pre class="example">
-geometry     Terminal size in chars (default: 80x24)
</pre>


<p>
This option defines the desired initial size of the terminal as
measured in characters. (The pixel size of the window will be a
function of this plus the font geometry, and cannot be specified
directly.)
</p>

<p>
This is just a request to the window manager; Zutty will accept and
work with whatever final window size it gets. Setting this will in no
way interfere with your ability to resize Zutty once it is up and
running.
</p>

<pre class="example">
-bg           Background color (default: #000)
-fg           Foreground color (default: #fff)
-cr           Cursor color
</pre>


<p>
These options accept a hexadecimal RGB or RRGGBB color specification,
similar to how you can define a color in many other places, e.g., CSS.
The leading <code>#</code> is optional (supported mainly to provide compatibility
with established conventions); take care to protect it from the shell
when passing it on the command line. Both lower- and uppercase
hexadecimal digits (a-f, A-F) are accepted, but note that names (e.g.,
<code>red</code> instead of <code>#f00</code>) are <i>not</i> supported.
</p>

<p>
If not explicitly set, the cursor color defaults to the foreground
color. In case the cursor is placed on a cell with a background color
set to the cursor color, the cursor color is automatically inverted to
ensure it stays visible.
</p>

<pre class="example">
-rv           Reverse video [boolean]
</pre>


<p>
Using this option will swap the effective foreground and background
color, regardless of whether their values originate from <code>-fg</code> and
<code>-bg</code>, or the corresponding resources, or the defaults. It will <i>not</i>
swap the meaning of color codes and such; if a program explicitly
specifies the color green, it will be rendered green with and without
<code>-rv</code>.
</p>

<pre class="example">
-boldColors   Enable bright for bold [boolean]
</pre>


<p>
This option enables combining the bold attribute with a brightening of
base colors. That is, when printing bold text, colors 0 through 7 will
be mapped to colors 8 through 15 by adding 8 to the color number.
These normally correspond to the brighter variants of the same colors.
This is enabled by default; supply <code>+boldColors</code> on the command line
to turn it off.
</p>

<pre class="example">
-border       Border width in pixels (default: 2)
</pre>


<p>
Specify the border width; specifically, the border that is part of the
client area of the Zutty window and not part of any window decoration
outside of the program's direct control. (This is equivalent to what
Xterm calls internal border width.)
</p>

<pre class="example">
-showWraps    Show wrap marks at right margin [boolean]
</pre>


<p>
Specify whether to draw a vertical mark on the right edge of cells
having the <code>wrap</code> bit set. This bit is set in case an auto-wrap occurs
just after the given position, so it only gets set on the right
margin.  However, following an increase of the window size, cells with
a set <code>wrap</code> bit might reside inside the right margin.
</p>

<p>
When selecting text, line breaks are suppressed depending on the
<code>wrap</code> bit (wrapped text is copied without the breaks introduced by
the wraps), so a visual indicator of this status bit might be useful
to better understand (or predict) behaviour. It might also be useful
to see this when debugging Zutty or an application writing text at the
right margin.
</p>

<pre class="example">
-title        Window title (default: Zutty)
</pre>


<p>
Set the title of the Zutty window. This might be overridden by usage
of the <code>-e</code> option (setting the title to the basename of the program
to be run), or at any later time by escape sequences output by the
shell (or any program executed by it).
</p>
</div>
</div>

<div id="outline-container-Shell%2Fcommand%20specification" class="outline-3">
<h3 id="Shell%2Fcommand%20specification">Shell/command specification</h3>
<div class="outline-text-3" id="text-Shell%2Fcommand%20specification">
<pre class="example">
-login        Start shell as a login shell [boolean]
</pre>


<p>
When this option is enabled, the shell started by Zutty will be a
login shell. This will be signalled to the shell process by setting
its <code>argv [0]</code> to begin with a dash (<code>-</code>). Shells evaluate different
sets of startup files depending on this (e.g., <code>bash</code> sources
<code>/etc/profile</code> and <code>~/.bash_profile</code> if started as a login shell, but
sources <code>~/.bashrc</code> otherwise). Please consult the documentation of
your shell for accurate details.
</p>

<p>
When using the <code>-e</code> option, this option will be ignored, because <code>-e</code>
is supposed to be used to launch non-shell text-mode programs in a
terminal window, and manipulating the <code>argv [0]</code> of such programs
might interfere with their operation.
</p>

<pre class="example">
-shell        Shell program to run
</pre>


<p>
Specify the shell program to run in the terminal. As a bit of special
syntax, this option can be passed both as a regular option (<code>-shell
bash</code> anywhere among a list of other options), or just the shell
itself (<code>bash</code>) as the last item on the command line. Either way, this
option is mutually exclusive with using the <code>-e</code> option. If both forms
are present, the last item on the command line will take precedence
over the value supplied after <code>-shell</code>.
</p>

<p>
The algorithm to resolve the executable to spawn resembles the
behaviour of <code>xterm</code>, and follows these steps:
</p>

<ol class="org-ol">
<li>Start with the value of <code>shell</code> (the last argument given after all
valid options, if present, or the value supplied after <code>-shell</code>).
In case no <code>shell</code> argument is given, the <code>Zutty.shell</code> resource is
consulted; if that is not set, the value of the <code>SHELL</code> environment
variable is used; if that is not set, the built-in default of
<code>bash</code> is assumed.</li>
<li>If not already an absolute path, resolve this to an absolute path
taking <code>PATH</code> into account, trying elements of the list of <code>PATH</code>
entries until the given shell resolves to an existing file at that
path.</li>
<li>Fall back on the <code>SHELL</code> environment variable, then the user's
<code>/etc/passwd</code> shell entry, if the above did not result in any
candidate.</li>
<li>Use <code>/bin/sh</code> as a last resort.</li>
<li>Validate the outcome of the above steps against the permitted shell
entries found in <code>/etc/shells</code>. Proceed, but clear <code>SHELL</code> from the
environment if the program is not listed as a valid shell.  Else,
set <code>SHELL</code> to the resolved full program path.</li>
</ol>

<pre class="example">
-e            Command line to run
</pre>


<p>
This option specifies the command line (program and arguments) to be
run in the Zutty terminal window. It also sets the window title to the
basename of the program to be executed.
</p>

<p>
Note that this must be the last option on the command line, as
everything after it will be passed verbatim to the spawned child
process.
</p>

<p>
Using this option is mutually exclusive with the <code>-shell</code> option, and
will silently override it, as well as discarding the <code>-login</code> option,
if any of those are also present.
</p>
</div>
</div>

<div id="outline-container-Font%20selection" class="outline-3">
<h3 id="Font%20selection">Font selection</h3>
<div class="outline-text-3" id="text-Font%20selection">
<p>
Zutty employs a simple but powerful model of font selection. Font
files are located under a search path and loaded by Zutty itself
(bypassing any infrastructure such as a font server, etc). In
principle, any font that is supported by the Freetype font library can
be used; in practice, only monospace fonts make sense. Both fixed size
(bitmap) fonts and scaled (vectorized) fonts are supported.
</p>

<p>
You specify the font to use by its name, which will be part of the
actual filename(s) that store the font. Multiple variants of the font
will be sought after: Zutty will try to find a Regular, a Bold, an
Italic and a Bold Italic variant of the font you specify. It is not an
error if these do not exist, as long as the primary variant (Regular)
is found.
</p>

<pre class="example">
-font        Font to use (default: 9x18)
</pre>


<p>
This option specifies the font name to use. The name supplied will
form the basis of a case-insensitive search under the font search
path. The search will try to locate a set of files under the same
subdirectory, starting with the supplied name and ending with the same
extension that is one of the recognized font file extensions. If such
a set of files is found, the full filenames (the parts after the
specified font name) will be used to assign the files to each variant
sought after.
</p>

<p>
For example, the default font is <code>9x18</code>. This is one of the "misc
fixed" fonts. After seeing that the font name is <code>9x18</code>, Zutty will
search under the font path <code>/usr/share/fonts</code> for files starting with
<code>9x18</code>. It will find <code>9x18.pcf.gz</code> and <code>9x18B.pcf.gz</code>, both under
<code>/usr/share/fonts/X11/misc</code>. Based on the filenames, Zutty will
recognize the first file as the regular variant, and the second file
as the bold variant. Other variants are absent; use of text attributes
that depend on them will result in sensible fallbacks.
</p>

<p>
As a second example, we will load a scaled font called Liberation Mono
by supplying <code>-font LiberationMono</code> (or <code>-font liberationmono</code>) to
Zutty. This will result in several files found, all under
<code>/usr/share/fonts/truetype/liberation</code>: <code>LiberationMono-Regular.ttf</code>,
<code>LiberationMono-Bold.ttf</code>, <code>LiberationMono-Italic.ttf</code> and
<code>LiberationMono-BoldItalic.ttf</code>. These files will be loaded as the
respective variants of the chosen font.
</p>

<pre class="example">
-fontsize    Font size (default: 16)
</pre>


<p>
For scaled fonts, such as Liberation Mono above, this setting controls
the height, measured in integer pixels, to rasterize the glyphs to.
The actual character grid size will almost always be more, due to the
fact that typefaces have some spacing around the glyphs themselves.
</p>

<p>
The specified size, if within one pixel of the size of a bitmap
strike, will result in picking that strike (pre-rasterized version)
from a scaled font with strikes. If there are no strikes, or the
specified size is too far from any pre-rasterized sizes, Zutty falls
back to rendering the outline at the requested size.
</p>

<p>
In case of a fixed size font with multiple bitmap sizes, the size
closest to the configured size will be selected.
</p>

<pre class="example">
-fontpath    Font search path (default: /usr/share/fonts)
</pre>


<p>
This option specifies the root of the directory structure where font
files will be searched. It is seldom necessary to change this, but
might be useful to try some new font you downloaded from the Internet
(and have not yet installed to a system-wide location).
</p>

<p>
Hint: you can specify more than one root, separated by colons. These
will be searched in order (left to right) until the specified font is
found.
</p>
</div>

<div id="outline-container-Recommended%20fonts" class="outline-4">
<h4 id="Recommended%20fonts">Recommended fonts</h4>
<div class="outline-text-4" id="text-Recommended%20fonts">
<p>
The author of Zutty prefers the so-called <a href="https://www.cl.cam.ac.uk/~mgk25/ucs-fonts.html">misc-fixed</a> fonts. These are
upgraded, extended versions of the bitmap fonts originally designed
for the X Window System, created in the '80s in an era of much
inferior computer displays. Their availability is universal; you
probably have them installed already. These fonts are highly optimized
for readability at low resolutions. There is a convenient range of
sizes, several fonts have bold variants and support thousands of
international characters and symbols outside ASCII. Zutty will work
best with any of misc-fixed 6x13, 7x13, 7x14, 8x13, 9x15 and 9x18
(there are more, but the ones listed have a bold-face variant as
well).
</p>

<p>
If you prefer scalable fonts (e.g., because you have a high-resolution
HiDPI display or prefer LARGE glyphs with a more modern look), Zutty
works well with freely available scaled terminal fonts such as
Anonymous Pro, Deja Vu Sans Mono, Free Mono, Hack, Inconsolata,
Liberation Mono, Source Code Pro, and possibly many more.
</p>

<p>
On Debian (and derived distributions), the following list of package
names might serve as a useful starting point to obtain some usable
fonts. For each package, install it and pass the specified name(s) to
<code>-font</code> to check them out:
</p>

<ul class="org-ul">
<li><code>xfonts-base</code>: 6x13, 7x13, 7x14, 8x13, 9x15, 9x18</li>
<li><code>fonts-dejavu-core</code>: DejaVuSansMono</li>
<li><code>fonts-liberation</code>: LiberationMono</li>
<li><code>fonts-freefont-ttf</code>: FreeMono</li>
<li><code>fonts-hack-otf</code>: Hack</li>
<li><code>fonts-inconsolata</code>: Inconsolata</li>
<li><code>ttf-anonymous-pro</code>: "Anonymous Pro"</li>
</ul>

<p>
Note that the quotation marks are required when passing an argument
value with a space, e.g.: <code>zutty -font "Anonymous Pro"</code>
</p>
</div>
</div>

<div id="outline-container-Making%20fonts%20discoverable" class="outline-4">
<h4 id="Making%20fonts%20discoverable">Making fonts discoverable</h4>
<div class="outline-text-4" id="text-Making%20fonts%20discoverable">
<p>
Zutty has a simple heuristic to identify the font files to load for
each variant of a given size of a requested font face. This will work
for lots of fonts (see above), but inevitably, certain fonts will have
naming schemes that evade this mechanism. In such a case, manually
renaming the files on your system will help. An even better method is
to create symlinks (symbolic links) to the font files with alternative
names that Zutty will be able to correctly identify. This has the
advantage of preserving the original files.
</p>

<p>
For example, <a href="https://people.mpi-inf.mpg.de/~uwe/misc/uw-ttyp0/">UW ttyp0</a> is a family of freely available monospace bitmap
fonts that works well with Zutty. You might want to consider it as an
alternative to the "misc fixed" family. However, installing these
fonts will yield names such as (for the 18-point, Unicode encoded
variant): <code>t0-18-uni.pcf.gz</code> (regular), <code>t0-18b-uni.pcf.gz</code> (bold),
<code>t0-18i-uni.pcf.gz</code> (italic). The solution is to add symlinks such as:
</p>

<ul class="org-ul">
<li><code>t0-18.pcf.gz -&gt; t0-18-uni.pcf.gz</code></li>
<li><code>t0-18b.pcf.gz -&gt; t0-18b-uni.pcf.gz</code></li>
<li><code>t0-18i.pcf.gz -&gt; t0-18i-uni.pcf.gz</code></li>
</ul>

<p>
These symlinks will allow you to use this font in Zutty by starting it
via <code>-font t0-18</code>. Add a similar set of symlinks for each point size
you want to be able to use.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-Persistent%20configuration" class="outline-2">
<h2 id="Persistent%20configuration">Persistent configuration</h2>
<div class="outline-text-2" id="text-Persistent%20configuration">
<p>
The configuration options documented in the previous chapter
<a href="#Configuration">Configuration</a> can be assigned altered defaults by adding entries to
the X resource database. Refer to the previous chapter for the list
and semantics of all options; here we show how to add entries for them
to your X resource database (Xrdb).
</p>

<p>
Open the file <code>.Xresources</code> in your home directory, or create it if
you do not have one. Use the following snippet merely as a starting
point; its purpose is to help you with enough examples to get what you
want, with the right syntax. Hint: you will <i>not</i> want to set exactly
these options.
</p>

<pre class="example">
Zutty.title:                   The Big Zutty
Zutty.geometry:                120x45
Zutty.altScroll:               true
Zutty.boldColors:              false
Zutty.font:                    Inconsolata
Zutty.fontsize:                18
Zutty.fontpath:                /home/tom/root/share/fonts:/usr/share/fonts
Zutty.fg:                      #00ff80
Zutty.bg:                      #234
Zutty.cr:                      #0f0
</pre>


<p>
As you can see, the general pattern is simple: one setting per line,
starting with a key that looks like <code>Zutty.&lt;option&gt;</code>, a colon, and the
desired value in a second column. The option names are exactly as
documented in the previous chapter.
</p>

<p>
Note that no quoting is necessary around string values containing a
space, and that boolean values are explicit, unlike on the command
line.
</p>

<p>
The program's resource lookup key <code>Zutty</code> is configurable via the
<code>-name</code> option and the <code>RESOURCE_NAME</code> environment variable (with the
former taking precedence over the latter), making it possible to have
various configuration sets activated by different instance names.  For
example, copy the above example snippet to something like this:
</p>

<pre class="example">
MyCustomZutty.title:           The Custom Zutty
MyCustomZutty.geometry:        135x54
...
</pre>


<p>
Then, this custom configuration can be activated by starting Zutty via
<code>zutty -name MyCustomZutty</code> or <code>RESOURCE_NAME=MyCustomZutty zutty</code>.
Also, the WM_CLASS window property will be set to contain the
configured instance name, which might be useful for window management
(identification). Note: there is no fallback to the default instance
name <code>Zutty</code>; for each custom instance name, you need to duplicate all
the settings you care about.
</p>

<p>
After saving your <code>~/.Xresources</code>, run the command <code>xrdb -merge
~/.Xresources</code> to merge the new settings from your file to the
in-memory resource database. Alternatively, just restart your X
session (log out and back in to your graphical desktop).
</p>

<p>
The configured values will show up in the output of <code>zutty -h</code> to
confirm that your settings have taken effect. For example, if you were
following along, you should now see
</p>

<pre class="example">
-title        Window title (configured: The Big Zutty)
</pre>


<p>
instead of the original version that read
</p>

<pre class="example">
-title        Window title (default: Zutty)
</pre>
</div>

<div id="outline-container-Extra%20resources" class="outline-3">
<h3 id="Extra%20resources">Extra resources</h3>
<div class="outline-text-3" id="text-Extra%20resources">
<p>
Zutty can be configured via some extra resources not available as
command line options. To get a printout of all these extra resources
available for configuration, pass the <code>-listres</code> option to Zutty. The
result will look like this:
</p>

<pre class="example">
Resources:
  altSendsEscape    Encode Alt key as ESC prefix (default: true)
  modifyOtherKeys   Key modifier encoding level; 0..2 (default: 1)
  color0            Palette color 0 (default: #000000)
  color1            Palette color 1 (default: #cd0000)
  ...
  color15           Palette color 15 (default: #ffffff)
</pre>


<p>
To customize <code>&lt;resource&gt;</code>, put an entry into <code>~/.Xresources</code> under the
key <code>Zutty.&lt;resource&gt;</code>. For example:
</p>

<pre class="example">
Zutty.altSendsEscape:          false
Zutty.modifyOtherKeys:         0
</pre>


<p>
After merging into Xrdb, the above output will reflect the configured
values, similar to the output of <code>zutty -h</code> for options as shown
above.
</p>
</div>

<div id="outline-container-altSendsEscape" class="outline-4">
<h4 id="altSendsEscape">altSendsEscape</h4>
<div class="outline-text-4" id="text-altSendsEscape">
<p>
The resource setting <code>altSendsEscape</code> controls how key combinations
containing the Alt modifier are encoded. The setting can be toggled
dynamically at runtime via DEC set/reset 1036/1039 (both numbers are
equivalent).  This is an xterm extension. The default value is true
(enabled).
</p>

<p>
When enabled, hitting any ordinary key (letters, punctuation symbols,
etc.) while holding Alt will result in the key being prefixed by the
ESC character. This is also applied to some special keys, e.g.,
Alt-Tab sends <code>ESC TAB</code> and Alt-Backspace sends <code>ESC DEL</code> or <code>ESC \b</code>
depending on the current DECBKM mode setting.  This allows programs
such as terminal-mode Emacs to recognize keyboard bindings containing
Alt (or Meta).
</p>

<p>
If <code>altSendsEscape</code> is disabled (set to false), Alt will cause the
characters to be shifted by adding 128 (setting the 8-th bit). This is
then sent UTF-8 encoded to the shell.
</p>

<p>
Notes:
</p>
<ul class="org-ul">
<li>Unlike XTerm, Zutty does not distinguish between Alt and
Meta.</li>
<li>In case <code>modifyOtherKeys</code> is non-zero (see below), the effects of
that will take precedence over this setting and produce a uniform
encoding for selected (if set to 1) or all (if set to 2) modified
key combinations.</li>
</ul>
</div>
</div>

<div id="outline-container-modifyOtherKeys" class="outline-4">
<h4 id="modifyOtherKeys">modifyOtherKeys</h4>
<div class="outline-text-4" id="text-modifyOtherKeys">
<p>
Zutty supports the <code>modifyOtherKeys</code> setting, which further affects
how special keys (modifier combinations) are encoded into control
sequences. It corresponds to xterm's identically named option (another
xterm extension; see its <a href="https://invisible-island.net/xterm/manpage/xterm.html#VT100-Widget-Resources:modifyOtherKeys">documentation</a> and <a href="https://dickey.his.com/xterm/xterm.faq.html#xterm_modother">this FAQ entry</a>).
</p>

<p>
This setting can be altered dynamically at runtime via the control
sequence <code>CSI &gt; 4 ; P m</code> where <code>P</code> can be 0, 1 or 2 (or omitted, which
is equivalent to 0). This is typically done by programs such as Vim to
be able to distinguish between e.g., <code>TAB</code> and <code>^I</code>.
</p>

<p>
The default value of modifyOtherKeys can be configured via the Xrdb
resource with the same name. In the absence of any configuration, it
defaults to 1 when Zutty is started. This enables e.g., terminal-mode
Emacs to correctly recognize most key combinations, while preserving
the ability to generate raw control characters (such as <code>NUL</code> via
Control-2, <code>ESC</code> via Control-3, etc).  See the relevant table in the
<a href="./KEYS.html#Special key combinations">key mapping reference</a> for several examples.
</p>
</div>
</div>

<div id="outline-container-Base%20palette%20colors" class="outline-4">
<h4 id="Base%20palette%20colors">Base palette colors</h4>
<div class="outline-text-4" id="text-Base%20palette%20colors">
<p>
The default 256-color palette of Zutty is identical to <code>xterm</code>'s
default colors. You may override the base 16 colors via the resources
<code>color0</code> to <code>color15</code>.  Feel free to configure none, a couple, or all
of them.  Here is an example configuration for installing the colors
of the <a href="https://srcery-colors.github.io">Srcery</a> palette:
</p>

<pre class="example">
Zutty.color0:                  #1c1b19
Zutty.color1:                  #ef2f27
Zutty.color2:                  #519f50
Zutty.color3:                  #fbb829
Zutty.color4:                  #2c78bf
Zutty.color5:                  #e02c6d
Zutty.color6:                  #0aaeb3
Zutty.color7:                  #d0bfa1
Zutty.color8:                  #918175
Zutty.color9:                  #f75341
Zutty.color10:                 #98bc37
Zutty.color11:                 #fed06e
Zutty.color12:                 #68a8e4
Zutty.color13:                 #ff5c8f
Zutty.color14:                 #53fde9
Zutty.color15:                 #fce8c3
</pre>


<p>
Note that the default foreground and background colors are separate
from the palette: resetting the text color (via SGR 39) will set it to
the default foreground color (configurable via <code>fg</code>), which might or
might not be identical to <code>color15</code>. The same is true when resetting
the background color (via SGR 49): the default background color (via
<code>bg</code>) will be used, which might or might not be identical to <code>color0</code>.
</p>
</div>
</div>
</div>

<div id="outline-container-Removing%20and%20overriding%20persistent%20configuration" class="outline-3">
<h3 id="Removing%20and%20overriding%20persistent%20configuration">Removing and overriding persistent configuration</h3>
<div class="outline-text-3" id="text-Removing%20and%20overriding%20persistent%20configuration">
<p>
Removing a piece of configuration is a bit tricky. If you remove a
setting from <code>~/.Xresources</code> and merge that into Xrdb, it will have no
immediate effect, since the existing setting will still persist
in-memory until you restart your X session.
</p>

<p>
To get around this, you might issue <code>xrdb -remove</code> to drop all your
customizations (and then reload them from file). Another solution is
to use <code>xrdb ~/.Xresources</code> (without the <code>-merge</code>) to load exactly
what is in that file (as opposed to merging). Useful if you have no
other sources of configuration!
</p>

<p>
Now that you have a tailored baseline of how you expect Zutty to start
up without any explicit options, remember that you can still override
all options on the command line! For example, if you have
<code>Zutty.altScroll: true</code> in your config, you might start Zutty with the
<code>+altScroll</code> option to turn it off only in that instance.
</p>
</div>
</div>
</div>
</div>
</body>
</html>
